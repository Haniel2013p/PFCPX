<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Painel - Serviço Secreto Municipal</title>
  <style>
    body {
      margin: 0;
      background-color: #000;
      color: white;
      font-family: Arial, sans-serif;
    }
    .container {
      padding: 20px;
    }
    h1, h2, h3 {
      color: #00aaff;
    }
    button {
      background-color: #007BFF;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
    }
    button:hover {
      background-color: #0056b3;
    }
    input, select {
      padding: 8px;
      margin: 5px;
    }
    .hidden {
      display: none;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
  </style>
</head>
<body>
  <div class="container" id="login-section">
    <h1>Login - Serviço Secreto Municipal</h1>
    <input type="text" id="login-id" placeholder="ID" />
    <input type="password" id="login-password" placeholder="Senha" />
    <button onclick="login()">Entrar</button>
    <p>Não tem conta? <button onclick="showRegister()">Cadastrar</button></p>
  </div>

  <div class="container hidden" id="register-section">
    <h1>Cadastro</h1>
    <input type="text" id="register-id" placeholder="ID" />
    <input type="password" id="register-password" placeholder="Senha" />
    <select id="register-divisao">
      <option value="Segurança">Segurança</option>
      <option value="Inteligência">Inteligência</option>
      <option value="Operações Táticas">Operações Táticas</option>
    </select>
    <button onclick="register()">Cadastrar</button>
    <button onclick="showLogin()">Voltar</button>
  </div>

  <div class="container hidden" id="main-panel">
    <div class="header">
      <h2 id="welcome-message"></h2>
      <div>
        <button onclick="showListaRegistros()">Lista de registros</button>
        <button onclick="logout()">Sair</button>
      </div>
    </div>
    <p>Bem-vindo ao painel do Serviço Secreto Municipal. Utilize as funções disponíveis conforme sua permissão.</p>
  </div>

  <div class="container hidden" id="lista-registros">
    <h2>Lista de Registros</h2>
    <table id="tabela-registros" border="1" style="color:white">
      <thead>
        <tr>
          <th>ID</th>
          <th>Divisão</th>
          <th>Cargo</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <button onclick="voltarPainel()">Voltar</button>
  </div>

  <script>
    const cargosPorDivisao = {
      "Segurança": ["Estagiário de Segurança", "Agente de Segurança", "Supervisor de Segurança", "Comandante de Segurança"],
      "Inteligência": ["Estagiário de Inteligência", "Analista", "Supervisor de Inteligência", "Chefe de Inteligência"],
      "Operações Táticas": ["Estagiário Tático", "Operador Tático", "Supervisor Tático", "Coordenador de Operações Táticas"],
      "Comando": ["Inspetor Geral", "VSSP", "SSP", "Administrador"]
    };

    let usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");
    let usuarioAtual = null;

    function showRegister() {
      document.getElementById("login-section").classList.add("hidden");
      document.getElementById("register-section").classList.remove("hidden");
    }

    function showLogin() {
      document.getElementById("register-section").classList.add("hidden");
      document.getElementById("login-section").classList.remove("hidden");
    }

    function register() {
      const id = document.getElementById("register-id").value;
      const senha = document.getElementById("register-password").value;
      const divisao = document.getElementById("register-divisao").value;
      if (usuarios.find(u => u.id === id)) {
        alert("ID já cadastrado!");
        return;
      }
      const primeiroCargo = cargosPorDivisao[divisao][0];
      usuarios.push({ id, senha, divisao, cargo: primeiroCargo });
      localStorage.setItem("usuarios", JSON.stringify(usuarios));
      alert("Cadastrado com sucesso!");
      showLogin();
    }

    function login() {
      const id = document.getElementById("login-id").value;
      const senha = document.getElementById("login-password").value;
      const user = usuarios.find(u => u.id === id && u.senha === senha);
      if (!user) {
        alert("ID ou senha inválidos.");
        return;
      }
      usuarioAtual = user;
      document.getElementById("login-section").classList.add("hidden");
      document.getElementById("main-panel").classList.remove("hidden");
      document.getElementById("welcome-message").innerText = `Bem-vindo, ${user.id} - ${user.divisao} (${user.cargo})`;
    }

    function logout() {
      usuarioAtual = null;
      document.getElementById("main-panel").classList.add("hidden");
      document.getElementById("login-section").classList.remove("hidden");
    }

    function showListaRegistros() {
      document.getElementById("main-panel").classList.add("hidden");
      document.getElementById("lista-registros").classList.remove("hidden");
      atualizarTabelaRegistros();
    }

    function voltarPainel() {
      document.getElementById("lista-registros").classList.add("hidden");
      document.getElementById("main-panel").classList.remove("hidden");
    }

    function atualizarTabelaRegistros() {
      const tbody = document.querySelector("#tabela-registros tbody");
      tbody.innerHTML = "";
      usuarios.forEach(u => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${u.id}</td><td>${u.divisao}</td><td>${u.cargo}</td>`;
        tbody.appendChild(tr);
      });
    }
  </script>
</body>
</html>
