<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Painel de Controle do Serviço Secreto Municipal</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #222;
      color: #eee;
      padding: 40px;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      color: #00ccff;
      margin-bottom: 30px;
    }
    input[type="text"], input[type="password"] {
      padding: 10px;
      font-size: 1.1em;
      border-radius: 5px;
      border: none;
      width: 250px;
      margin: 5px 0;
      background-color: #444;
      color: #eee;
    }
    button {
      padding: 10px 20px;
      font-size: 1.1em;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
      background-color: #00ccff;
      color: #222;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #0099cc;
      color: white;
    }
    #resultado, #novo-jogador, #login, #painel-pesquisa, #sobre-ss, #lista-registros {
      background-color: #333;
      padding: 20px;
      border-radius: 8px;
      width: 380px;
      text-align: center;
      margin-top: 30px;
    }
    #acoes button {
      width: 100px;
    }
    #btnToggleCadastro {
      font-size: 0.9em;
      color: #00ccff;
      background: none;
      border: none;
      cursor: pointer;
      margin-top: 10px;
      text-decoration: underline;
    }
    #user-info {
      position: fixed;
      top: 10px;
      right: 10px;
      background-color: #333;
      padding: 10px 20px;
      border-radius: 8px;
      display: none;
      color: #00ccff;
      font-weight: bold;
      user-select: none;
    }
    #btnListaRegistros, #btnPainel {
      position: fixed;
      top: 10px;
      left: 10px;
      background: none;
      border: none;
      color: white;
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      margin-right: 10px;
      user-select: none;
      padding: 5px 8px;
      border-radius: 4px;
      transition: background-color 0.2s;
    }
    #btnPainel {
      left: 140px;
    }
    #btnListaRegistros:hover, #btnPainel:hover {
      background-color: #005f7f;
    }
    #lista-registros {
      max-height: 350px;
      overflow-y: auto;
      text-align: left;
      font-size: 0.9em;
      line-height: 1.4em;
      white-space: pre-wrap;
      font-family: monospace;
    }
    #sobre-ss h2 {
      margin-top: 0;
    }
  </style>
</head>
<body>

  <h1>Painel de Controle do Serviço Secreto Municipal</h1>

  <!-- Login -->
  <div id="login">
    <input type="text" id="loginID" placeholder="Digite seu ID" />
    <input type="password" id="loginSenha" placeholder="Digite sua senha" />
    <button onclick="fazerLogin()">Entrar</button>

    <button id="btnToggleCadastro">Ou cadastre-se abaixo</button>
  </div>

  <!-- Cadastro -->
  <div id="novo-jogador" style="display:none;">
    <h2>Adicionar Novo Jogador</h2>
    <input type="text" id="novoID" placeholder="Digite o novo ID" />
    <input type="text" id="novoNome" placeholder="Digite o nome" />
    <input type="password" id="novaSenha" placeholder="Digite a senha" />
    <button onclick="adicionarJogador()">Adicionar Jogador</button>
  </div>

  <!-- Texto Sobre Serviço Secreto -->
  <div id="sobre-ss" style="display:none; max-width: 600px; text-align: center;">
    <h2>Sobre o Serviço Secreto</h2>
    <p>O Serviço Secreto é um órgão de segurança da gestão Municipal do Complexo, pode atuar na segurança de funcionários públicos, juízes e secretários, mas trabalha de forma prioritária e intensa na segurança do Prefeito da cidade.</p>
  </div>

  <!-- Botões topo esquerdo, inicialmente escondidos -->
  <button id="btnListaRegistros" style="display:none;">Lista de Registros</button>
  <button id="btnPainel" style="display:none;">Painel</button>

  <!-- Lista de Registros -->
  <div id="lista-registros" style="display:none;"></div>

  <!-- Painel de Pesquisa -->
  <div id="painel-pesquisa" style="display:none;">
    <input type="text" id="inputID" placeholder="Digite o ID do jogador" />
    <button onclick="pesquisar()">Pesquisar</button>
  </div>

  <!-- Resultado -->
  <div id="resultado" style="display:none;">
    <p><strong>Nome:</strong> <span id="nome"></span></p>
    <p><strong>Cargo:</strong> <span id="cargo"></span></p>
    <div id="acoes">
      <button onclick="promover()">Promover</button>
      <button onclick="rebaixar()">Rebaixar</button>
      <button onclick="expulsar()">Expulsar</button>
    </div>
  </div>

  <!-- Info usuário logado no canto -->
  <div id="user-info"></div>

<script>
const cargos = [
  "Estagiário",
  "Investigador operacional",
  "Agente especializado",
  "Inspetor",
  "Inspetor chefe",
  "Chefe de inteligência",
  "Vice Secretario de segurança Pública",
  "Secretario de segurança pública"
];

// Webhook Discord
const webhookURL = "https://discord.com/api/webhooks/1390011117778112723/KWkdPpdOmtRkgLlUH7QLUwx3sqxnHX-qhA0EkZFwjRiMPTJL8bLmbL1l3P-LZWRJBKeb";

let jogadores = JSON.parse(localStorage.getItem('jogadores')) || {
  "1": { nome: "Rodrigo", cargo: "Inspetor chefe", senha: "RD" },
  "2": { nome: "Japa", cargo: "Inspetor", senha: "JP" },
  "3": { nome: "Haniel", cargo: "Vice Secretario de segurança Pública", senha: "Haniel" },
  "4": { nome: "Luis", cargo: "Estagiário", senha: "LS" }
};

let idAtual = null;
let idAtualSelecionado = null;

function salvarLocalStorage() {
  localStorage.setItem('jogadores', JSON.stringify(jogadores));
}

function fazerLogin() {
  const id = document.getElementById('loginID').value.trim();
  const senha = document.getElementById('loginSenha').value;

  if (!(id in jogadores)) {
    alert('ID não encontrado!');
    return;
  }
  if (jogadores[id].senha !== senha) {
    alert('Senha incorreta!');
    return;
  }

  idAtual = id;

  // Ocultar login e cadastro
  document.getElementById('login').style.display = 'none';
  document.getElementById('novo-jogador').style.display = 'none';

  // Mostrar info usuário
  const userInfo = document.getElementById('user-info');
  userInfo.innerText = `Nome: ${jogadores[idAtual].nome} | Cargo: ${jogadores[idAtual].cargo}`;
  userInfo.style.display = 'block';

  // Mostrar texto sobre Serviço Secreto
  mostrarSobreSS();

  // Mostrar botões topo esquerdo
  document.getElementById('btnListaRegistros').style.display = 'inline-block';
  document.getElementById('btnPainel').style.display = 'inline-block';
  document.getElementById('btnPainel').style.color = '#555'; // painel inicia inativo

  // Esconder lista e painel de pesquisa (ainda)
  document.getElementById('lista-registros').style.display = 'none';
  document.getElementById('painel-pesquisa').style.display = 'none';
  document.getElementById('resultado').style.display = 'none';

  // Reset seleção
  idAtualSelecionado = null;
}

function mostrarSobreSS() {
  document.getElementById('sobre-ss').style.display = 'block';
  document.getElementById('lista-registros').style.display = 'none';
  document.getElementById('painel-pesquisa').style.display = 'none';
  document.getElementById('resultado').style.display = 'none';

  // Botão "Lista de Registros" ativo (branco), Painel inativo (cinza)
  document.getElementById('btnListaRegistros').style.color = 'white';
  document.getElementById('btnPainel').style.color = '#555';
}

function mostrarListaRegistros() {
  // Montar texto da lista
  let texto = "Nome                 | ID   | Cargo\n";
  texto += "---------------------------------------------\n";
  for (const id in jogadores) {
    const j = jogadores[id];
    texto += padRight(j.nome, 20) + " | " + padRight(id, 4) + " | " + j.cargo + "\n";
  }
  const listaDiv = document.getElementById('lista-registros');
  listaDiv.textContent = texto;

  document.getElementById('sobre-ss').style.display = 'none';
  document.getElementById('lista-registros').style.display = 'block';
  document.getElementById('painel-pesquisa').style.display = 'none';
  document.getElementById('resultado').style.display = 'none';

  // Botão "Lista de Registros" ativo (branco), Painel inativo (cinza)
  document.getElementById('btnListaRegistros').style.color = 'white';
  document.getElementById('btnPainel').style.color = '#555';
}

function mostrarPainelPesquisa() {
  document.getElementById('sobre-ss').style.display = 'none';
  document.getElementById('lista-registros').style.display = 'none';
  document.getElementById('painel-pesquisa').style.display = 'block';
  // se já pesquisou algo, mostrar resultado, senão esconder
  if(idAtualSelecionado && jogadores[idAtualSelecionado]) {
    document.getElementById('resultado').style.display = 'block';
    atualizarExibicao(idAtualSelecionado);
        if (p) {
      // deixa o botão Painel ativo (branco)
      document.getElementById('btnPainel').style.color = 'white';
      document.getElementById('btnListaRegistros').style.color = '#555';
    }
}

function padRight(text, length) {
  return text.length >= length ? text : text + " ".repeat(length - text.length);
}

function pesquisar() {
  const inputID = document.getElementById('inputID').value.trim();
  if (!(inputID in jogadores)) {
    alert('Jogador não encontrado!');
    document.getElementById('resultado').style.display = 'none';
    return;
  }
  idAtualSelecionado = inputID;
  atualizarExibicao(inputID);
  document.getElementById('resultado').style.display = 'block';

  // Ativa o botão Painel e desativa Lista
  document.getElementById('btnPainel').style.color = 'white';
  document.getElementById('btnListaRegistros').style.color = '#555';
}

function atualizarExibicao(id) {
  const jogador = jogadores[id];
  document.getElementById('nome').innerText = jogador.nome;
  document.getElementById('cargo').innerText = jogador.cargo;
}

function promover() {
  if (!idAtualSelecionado) return alert('Pesquise um jogador primeiro.');
  let jogador = jogadores[idAtualSelecionado];
  let indice = cargos.indexOf(jogador.cargo);
  if (indice === cargos.length - 1) {
    alert('Jogador já está no cargo máximo.');
    return;
  }
  jogador.cargo = cargos[indice + 1];
  jogadores[idAtualSelecionado] = jogador;
  salvarLocalStorage();
  atualizarExibicao(idAtualSelecionado);
  alert(`Jogador promovido para ${jogador.cargo}`);

  enviarLogDiscord(`${jogadores[idAtual].nome} promoveu ${jogador.nome} para ${jogador.cargo}`);
}

function rebaixar() {
  if (!idAtualSelecionado) return alert('Pesquise um jogador primeiro.');
  let jogador = jogadores[idAtualSelecionado];
  let indice = cargos.indexOf(jogador.cargo);
  if (indice === 0) {
    alert('Jogador já está no cargo mínimo.');
    return;
  }
  jogador.cargo = cargos[indice - 1];
  jogadores[idAtualSelecionado] = jogador;
  salvarLocalStorage();
  atualizarExibicao(idAtualSelecionado);
  alert(`Jogador rebaixado para ${jogador.cargo}`);

  enviarLogDiscord(`${jogadores[idAtual].nome} rebaixou ${jogador.nome} para ${jogador.cargo}`);
}

function expulsar() {
  if (!idAtualSelecionado) return alert('Pesquise um jogador primeiro.');
  if (idAtualSelecionado === idAtual) {
    alert('Você não pode expulsar a si mesmo!');
    return;
  }
  if (!confirm(`Tem certeza que deseja expulsar ${jogadores[idAtualSelecionado].nome}?`)) return;

  const expulso = jogadores[idAtualSelecionado].nome;
  delete jogadores[idAtualSelecionado];
  salvarLocalStorage();

  alert(`Jogador ${expulso} expulso com sucesso!`);
  enviarLogDiscord(`${jogadores[idAtual].nome} expulsou ${expulso}`);

  // Limpar resultado e pesquisa
  document.getElementById('resultado').style.display = 'none';
  document.getElementById('inputID').value = '';
  idAtualSelecionado = null;
}

// Adicionar novo jogador (cadastro)
function adicionarJogador() {
  const novoID = document.getElementById('novoID').value.trim();
  const novoNome = document.getElementById('novoNome').value.trim();
  const novaSenha = document.getElementById('novaSenha').value.trim();

  if (!novoID || !novoNome || !novaSenha) {
    alert('Preencha todos os campos do cadastro.');
    return;
  }
  if (novoID in jogadores) {
    alert('ID já existe!');
    return;
  }
  jogadores[novoID] = { nome: novoNome, cargo: cargos[0], senha: novaSenha };
  salvarLocalStorage();
  alert(`Jogador ${novoNome} cadastrado com sucesso com cargo ${cargos[0]}`);

  // Limpar inputs
  document.getElementById('novoID').value = '';
  document.getElementById('novoNome').value = '';
  document.getElementById('novaSenha').value = '';

  // Voltar para login
  document.getElementById('novo-jogador').style.display = 'none';
  document.getElementById('login').style.display = 'block';
}

// Alternar cadastro / login
document.getElementById('btnToggleCadastro').addEventListener('click', () => {
  const cadastro = document.getElementById('novo-jogador');
  const login = document.getElementById('login');
  if (cadastro.style.display === 'none') {
    cadastro.style.display = 'block';
    login.style.display = 'none';
  } else {
    cadastro.style.display = 'none';
    login.style.display = 'block';
  }
});

// Botões topo esquerdo para alternar abas
document.getElementById('btnListaRegistros').addEventListener('click', () => {
  mostrarListaRegistros();
});
document.getElementById('btnPainel').addEventListener('click', () => {
  mostrarPainelPesquisa();
});

function enviarLogDiscord(mensagem) {
  fetch(webhookURL, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ content: mensagem })
  }).catch(e => console.error('Erro ao enviar log:', e));
}
</script>

</body>
</html>

