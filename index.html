<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Painel SSP</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    #painel, #novo-jogador, #identificadorLogado, #sobre-ss,
    #lista-registros, #painel-pesquisa, #resultado {
      margin: 20px;
    }
    button {
      margin: 5px;
    }
  </style>
</head>
<body>

<!-- Tela de Login -->
<div id="login">
  <h2>Login</h2>
  <input id="inputLoginID" placeholder="ID" /><br />
  <input id="inputLoginNome" placeholder="Nome" /><br />
  <button id="btnLogin">Entrar</button>
  <button id="btnCadastrar">Cadastrar</button>
</div>

<!-- Cadastro -->
<div id="novo-jogador" style="display:none;">
  <h2>Cadastrar novo jogador</h2>
  <input id="inputCadastroID" placeholder="ID" /><br />
  <input id="inputCadastroNome" placeholder="Nome" /><br />
  <button id="btnSalvarCadastro">Salvar</button>
  <button id="btnCancelarCadastro">Cancelar</button>
</div>

<!-- Painel principal -->
<div id="painel" style="display:none;">
  <div id="identificadorLogado" style="display:none;">
    <p>Logado como: <span id="usuarioLogadoNome"></span> (ID: <span id="usuarioLogadoID"></span>)</p>
  </div>

  <h2>Painel SSP</h2>
  <button id="btnSobre">Sobre o Serviço Secreto</button>
  <button id="btnListaRegistros">Lista de registros</button>
  <button id="btnPainelPesquisa">Pesquisar jogador</button>
  <button id="btnLogout">Logout</button>

  <!-- Sobre o Serviço Secreto -->
  <div id="sobre-ss" style="display:none;">
    <p style="text-align:center;">
      Serviço Secreto Municipal, segurança máxima e proteção aos cidadãos.
    </p>
  </div>

  <!-- Lista de registros -->
  <div id="lista-registros" style="display:none;">
    <h3>Registros dos membros</h3>
    <ul id="lista-membros"></ul>
    <button id="btnFecharLista">Fechar lista</button>
  </div>

  <!-- Painel de pesquisa -->
  <div id="painel-pesquisa" style="display:none;">
    <input id="inputPesquisa" placeholder="Digite o nome ou ID" />
    <button id="btnPesquisar">Pesquisar</button>
    <button id="btnFecharPesquisa">Fechar pesquisa</button>
  </div>

  <!-- Resultado da pesquisa -->
  <div id="resultado" style="display:none;">
    <h3>Resultado</h3>
    <p id="resultadoTexto"></p>
    <button id="btnPromover">Promover</button>
    <button id="btnRebaixar">Rebaixar</button>
    <button id="btnExpulsar">Expulsar</button>
    <button id="btnFecharResultado">Fechar resultado</button>
  </div>
</div>

<script>
  // Variáveis DOM
  const loginDiv = document.getElementById('login');
  const cadastroDiv = document.getElementById('novo-jogador');
  const painelDiv = document.getElementById('painel');

  const inputLoginID = document.getElementById('inputLoginID');
  const inputLoginNome = document.getElementById('inputLoginNome');
  const btnLogin = document.getElementById('btnLogin');
  const btnCadastrar = document.getElementById('btnCadastrar');

  const inputCadastroID = document.getElementById('inputCadastroID');
  const inputCadastroNome = document.getElementById('inputCadastroNome');
  const btnSalvarCadastro = document.getElementById('btnSalvarCadastro');
  const btnCancelarCadastro = document.getElementById('btnCancelarCadastro');

  const identificadorLogado = document.getElementById('identificadorLogado');
  const usuarioLogadoNome = document.getElementById('usuarioLogadoNome');
  const usuarioLogadoID = document.getElementById('usuarioLogadoID');

  const btnSobre = document.getElementById('btnSobre');
  const btnListaRegistros = document.getElementById('btnListaRegistros');
  const btnPainelPesquisa = document.getElementById('btnPainelPesquisa');
  const btnLogout = document.getElementById('btnLogout');

  const sobreDiv = document.getElementById('sobre-ss');
  const listaRegistrosDiv = document.getElementById('lista-registros');
  const listaMembros = document.getElementById('lista-membros');
  const btnFecharLista = document.getElementById('btnFecharLista');

  const painelPesquisaDiv = document.getElementById('painel-pesquisa');
  const inputPesquisa = document.getElementById('inputPesquisa');
  const btnPesquisar = document.getElementById('btnPesquisar');
  const btnFecharPesquisa = document.getElementById('btnFecharPesquisa');

  const resultadoDiv = document.getElementById('resultado');
  const resultadoTexto = document.getElementById('resultadoTexto');
  const btnPromover = document.getElementById('btnPromover');
  const btnRebaixar = document.getElementById('btnRebaixar');
  const btnExpulsar = document.getElementById('btnExpulsar');
  const btnFecharResultado = document.getElementById('btnFecharResultado');

  let jogadores = [];
  let idAtual = null;
  let idSelecionado = null;

  // Salvar jogadores no localStorage
  function salvarLocalStorage() {
    localStorage.setItem('jogadoresSS', JSON.stringify(jogadores));
  }

  // Função para mostrar só um painel
  function mostrarPainel(painel) {
    // Esconde tudo
    loginDiv.style.display = 'none';
    cadastroDiv.style.display = 'none';
    painelDiv.style.display = 'none';
    sobreDiv.style.display = 'none';
    listaRegistrosDiv.style.display = 'none';
    painelPesquisaDiv.style.display = 'none';
    resultadoDiv.style.display = 'none';

    // Mostra só o painel desejado
    painel.style.display = 'block';
  }

  // Função para atualizar lista de membros no painel
  function atualizarListaRegistros() {
    listaMembros.innerHTML = '';
    jogadores.forEach(jogador => {
      const li = document.createElement('li');
      li.textContent = `ID: ${jogador.id} - Nome: ${jogador.nome} - Cargo: ${jogador.cargo}`;
      listaMembros.appendChild(li);
    });
  }

  // Login
  btnLogin.onclick = () => {
    const id = inputLoginID.value.trim();
    const nome = inputLoginNome.value.trim();
    if (!id || !nome) {
      alert('Preencha ID e Nome para entrar.');
      return;
    }
    // Procura jogador
    const jogador = jogadores.find(j => j.id === id && j.nome === nome);
    if (!jogador) {
      alert('Jogador não encontrado. Cadastre-se primeiro.');
      return;
    }
    idAtual = jogador.id;
    usuarioLogadoNome.textContent = jogador.nome;
    usuarioLogadoID.textContent = jogador.id;
    identificadorLogado.style.display = 'block';

    mostrarPainel(painelDiv);
    // Mostrar texto explicativo
    sobreDiv.style.display = 'block';
  };

  // Abrir cadastro
  btnCadastrar.onclick = () => {
    mostrarPainel(cadastroDiv);
  };

  // Salvar cadastro
  btnSalvarCadastro.onclick = () => {
    const id = inputCadastroID.value.trim();
    const nome = inputCadastroNome.value.trim();
    if (!id || !nome) {
      alert('Preencha ID e Nome para cadastrar.');
      return;
    }
    if (jogadores.find(j => j.id === id)) {
      alert('ID já cadastrado.');
      return;
    }
    jogadores.push({ id, nome, cargo: 'Recruta' });
    salvarLocalStorage();
    alert('Cadastro realizado com sucesso!');
    mostrarPainel(loginDiv);
  };

  // Cancelar cadastro
  btnCancelarCadastro.onclick = () => {
    mostrarPainel(loginDiv);
  };

  // Mostrar Sobre
  btnSobre.onclick = () => {
    sobreDiv.style.display = sobreDiv.style.display === 'block' ? 'none' : 'block';
    listaRegistrosDiv.style.display = 'none';
    painelPesquisaDiv.style.display = 'none';
    resultadoDiv.style.display = 'none';
  };

  // Mostrar lista de registros
  btnListaRegistros.onclick = () => {
    atualizarListaRegistros();
    mostrarPainel(listaRegistrosDiv);
  };

  btnFecharLista.onclick = () => {
    mostrarPainel(painelDiv);
    sobreDiv.style.display = 'block';
  };

  // Mostrar painel de pesquisa
  btnPainelPesquisa.onclick = () => {
    mostrarPainel(painelPesquisaDiv);
  };

  btnFecharPesquisa.onclick = () => {
    mostrarPainel(painelDiv);
    sobreDiv.style.display = 'block';
  };

  // Pesquisa jogador
  btnPesquisar.onclick = () => {
    const termo = inputPesquisa.value.trim().toLowerCase();
    if (!termo) {
      alert('Digite um nome ou ID para pesquisar.');
      return;
    }
    const jogador = jogadores.find(j =>
      j.id.toLowerCase() === termo || j.nome.toLowerCase() === termo
    );
    if (!jogador) {
      alert('Jogador não encontrado.');
      return;
    }
    idSelecionado = jogador.id;
    resultadoTexto.textContent = `ID: ${jogador.id} - Nome: ${jogador.nome} - Cargo: ${jogador.cargo}`;
    mostrarPainel(resultadoDiv);
  };

  // Ações Promover, Rebaixar, Expulsar
  btnPromover.onclick = () => {
    if (!idSelecionado) return alert('Nenhum jogador selecionado.');
    const jogador = jogadores.find(j => j.id === idSelecionado);
    if (!jogador) return alert('Jogador não encontrado.');
    if (jogador.cargo === 'Chefe') return alert('Já é o cargo máximo.');
    // Exemplo de cargos
    const cargos = ['Recruta', 'Agente', 'Chefe'];
    let i = cargos.indexOf(jogador.cargo);
    if (i < cargos.length -1) {
      jogador.cargo = cargos[i +1];
      alert(`Jogador promovido para ${jogador.cargo}`);
      salvarLocalStorage();
      resultadoTexto.textContent = `ID: ${jogador.id} - Nome: ${jogador.nome} - Cargo: ${jogador.cargo}`;
    }
  };

  btnRebaixar.onclick = () => {
    if (!idSelecionado) return alert('Nenhum jogador selecionado.');
    const jogador = jogadores.find(j => j.id === idSelecionado);
    if (!jogador) return alert('Jogador não encontrado.');
    if (jogador.cargo === 'Recruta') return alert('Já é o cargo mínimo.');
    const cargos = ['Recruta', 'Agente', 'Chefe'];
    let i = cargos.indexOf(jogador.cargo);
    if (i > 0) {
      jogador.cargo = cargos[i -1];
      alert(`Jogador rebaixado para ${jogador.cargo}`);
      salvarLocalStorage();
      resultadoTexto.textContent = `ID: ${jogador.id} - Nome: ${jogador.nome} - Cargo: ${jogador.cargo}`;
    }
  };

  btnExpulsar.onclick = () => {
    if (!idSelecionado) return alert('Nenhum jogador selecionado.');
    if (!confirm('Tem certeza que deseja expulsar este jogador?')) return;
    jogadores = jogadores.filter(j => j.id !== idSelecionado);
    salvarLocalStorage();
    alert('Jogador expulso com sucesso.');
    mostrarPainel(painelDiv);
    sobreDiv.style.display = 'block';
  };

  // Fechar resultado
  btnFecharResultado.onclick = () => {
    mostrarPainel(painelDiv);
    sobreDiv.style.display = 'block';
  };

  // Logout
  btnLogout.onclick = () => {
    idAtual = null;
    usuarioLogadoNome.textContent = '';
    usuarioLogadoID.textContent = '';
    identificadorLogado.style.display = 'none';
    mostrarPainel(loginDiv);
  };

  // Carregar jogadores do localStorage no início
  window.onload = () => {
    const data = localStorage.getItem('jogadoresSS');
    if (data) {
      jogadores = JSON.parse(data);
    } else {
      salvarLocalStorage();
    }

    mostrarPainel(loginDiv);
  };
</script>
</body>
</html>
