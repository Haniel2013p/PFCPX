<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Serviço Secreto Municipal</title>
    <style>
        body {
            background-color: #000;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        input, select, button {
            margin: 5px;
            padding: 8px;
            border-radius: 5px;
            border: none;
        }
        button {
            background-color: #007BFF;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .hidden {
            display: none;
        }
        .section {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Painel do Serviço Secreto Municipal</h1>

    <div id="loginSection">
        <h2>Login</h2>
        <input type="text" id="loginId" placeholder="ID">
        <input type="password" id="loginSenha" placeholder="Senha">
        <button onclick="login()">Entrar</button>
        <p>Não tem conta? <a href="#" onclick="mostrarCadastro()">Cadastre-se</a></p>
    </div>

    <div id="cadastroSection" class="hidden">
        <h2>Cadastro</h2>
        <input type="text" id="cadastroId" placeholder="ID">
        <input type="text" id="cadastroNome" placeholder="Nome">
        <input type="password" id="cadastroSenha" placeholder="Senha">
        <select id="cadastroDivisao">
            <option value="Inteligência e Investigações">Inteligência e Investigações</option>
            <option value="Operações Táticas">Operações Táticas</option>
            <option value="Proteção Executiva">Proteção Executiva</option>
        </select>
        <button onclick="cadastrar()">Cadastrar</button>
        <p>Já tem conta? <a href="#" onclick="mostrarLogin()">Voltar ao Login</a></p>
    </div>

    <div id="painelSection" class="hidden">
        <h2 id="bemVindo">Bem-vindo!</h2>
        <button onclick="mostrarListaRegistros()">Lista de registros</button>
        <button onclick="mostrarBancoCriminal()">Banco criminais</button>
        <div class="section" id="mensagemInicial">
            <p>Você agora está acessando o Painel do Serviço Secreto Municipal. Use com responsabilidade.</p>
        </div>

        <div id="listaRegistros" class="hidden section">
            <h3>Lista de Membros</h3>
            <table id="tabelaRegistros" border="1" style="margin: auto; background: white; color: black;"></table>
            <button onclick="voltarPainel()">Voltar</button>
        </div>

        <div id="bancoCriminal" class="hidden section">
            <h3>Banco de Dados Criminal</h3>
            <form id="formCriminal">
                <input type="text" id="nomeCriminal" placeholder="Nome">
                <input type="text" id="rgCriminal" placeholder="RG">
                <textarea id="historicoCriminal" placeholder="Histórico"></textarea><br>
                <select id="statusCriminal">
                    <option>Em investigação</option>
                    <option>Processo penal em andamento</option>
                    <option>Fugitivo</option>
                    <option>Em liberdade</option>
                </select>
                <select id="foiPreso">
                    <option>Sim</option>
                    <option>Não</option>
                </select><br>
                <button type="button" onclick="adicionarRegistroCriminal()">Adicionar</button>
                <button type="button" onclick="pesquisarRegistroCriminal()">Pesquisar</button>
            </form>
            <div id="resultadoCriminal"></div>
            <button onclick="voltarPainel()">Voltar</button>
        </div>
    </div>

    <script>
        const divisoes = {
            "Inteligência e Investigações": [
                "Estagiário",
                "Investigador Operacional",
                "Agente de Inteligência",
                "Agente Especializado",
                "Inspetor",
                "Inspetor Chefe",
                "Chefe de Inteligência"
            ],
            "Operações Táticas": [
                "Agente de Operações Especiais",
                "Agente de Intervenção",
                "Capitão",
                "Coordenador de Operações Táticas"
            ],
            "Proteção Executiva": [
                "Agente de Segurança Municipal",
                "Agente de Proteção Avançada",
                "Sub Comandante de Segurança",
                "Comandante de Segurança"
            ],
            "Divisão Comando": [
                "Inspetor Geral",
                "Chefe de Operações",
                "Sub Diretor do Serviço Secreto",
                "Diretor do Serviço Secreto"
            ]
        };

        const especiais = ["VSSP", "SSP", "ADMINISTRADOR"];

        const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
        const registrosCriminais = JSON.parse(localStorage.getItem("registrosCriminais")) || [];

        let usuarioLogado = null;

        function mostrarCadastro() {
            document.getElementById("loginSection").classList.add("hidden");
            document.getElementById("cadastroSection").classList.remove("hidden");
        }

        function mostrarLogin() {
            document.getElementById("cadastroSection").classList.add("hidden");
            document.getElementById("loginSection").classList.remove("hidden");
        }

        function cadastrar() {
            const id = document.getElementById("cadastroId").value;
            const nome = document.getElementById("cadastroNome").value;
            const senha = document.getElementById("cadastroSenha").value;
            const divisao = document.getElementById("cadastroDivisao").value;

            if (!id || !senha || !nome) {
                alert("Preencha todos os campos!");
                return;
            }

            const patenteInicial = divisoes[divisao][0];

            usuarios.push({ id, nome, senha, divisao, patente: patenteInicial });
            localStorage.setItem("usuarios", JSON.stringify(usuarios));
            alert("Cadastro realizado com sucesso!");
            mostrarLogin();
        }

        function login() {
            const id = document.getElementById("loginId").value;
            const senha = document.getElementById("loginSenha").value;
            usuarioLogado = usuarios.find(u => u.id === id && u.senha === senha);

            if (!usuarioLogado) {
                alert("ID ou senha incorretos!");
                return;
            }

            if (usuarioLogado.id === "0") {
                usuarioLogado.divisao = "Divisão Comando";
                usuarioLogado.patente = "ADMINISTRADOR";
            }

            document.getElementById("loginSection").classList.add("hidden");
            document.getElementById("painelSection").classList.remove("hidden");
            document.getElementById("bemVindo").innerText = `Bem-vindo, ${usuarioLogado.nome}!`;
        }

        function mostrarListaRegistros() {
            document.getElementById("mensagemInicial").classList.add("hidden");
            document.getElementById("bancoCriminal").classList.add("hidden");
            document.getElementById("listaRegistros").classList.remove("hidden");
            const tabela = document.getElementById("tabelaRegistros");
            tabela.innerHTML = "<tr><th>Nome</th><th>ID</th><th>Divisão</th><th>Patente</th></tr>";
            usuarios.forEach(u => {
                tabela.innerHTML += `<tr><td>${u.nome}</td><td>${u.id}</td><td>${u.divisao}</td><td>${u.patente}</td></tr>`;
            });
        }

        function mostrarBancoCriminal() {
            document.getElementById("mensagemInicial").classList.add("hidden");
            document.getElementById("listaRegistros").classList.add("hidden");
            document.getElementById("bancoCriminal").classList.remove("hidden");
        }

        function voltarPainel() {
            document.getElementById("mensagemInicial").classList.remove("hidden");
            document.getElementById("listaRegistros").classList.add("hidden");
            document.getElementById("bancoCriminal").classList.add("hidden");
        }

        function adicionarRegistroCriminal() {
            const nome = document.getElementById("nomeCriminal").value;
            const rg = document.getElementById("rgCriminal").value;
            const historico = document.getElementById("historicoCriminal").value;
            const status = document.getElementById("statusCriminal").value;
            const foiPreso = document.getElementById("foiPreso").value;

            let totalPrisao = 0;
            if (status === "Em liberdade" && foiPreso === "Sim") totalPrisao = 1;

            registrosCriminais.push({ nome, rg, historico, status, foiPreso, totalPrisao });
            localStorage.setItem("registrosCriminais", JSON.stringify(registrosCriminais));
            alert("Registro criminal adicionado!");
        }

        function pesquisarRegistroCriminal() {
            const nome = document.getElementById("nomeCriminal").value;
            const resultado = registrosCriminais.filter(r => r.nome.includes(nome));
            let html = "<table border='1' style='margin:auto; background:white; color:black'><tr><th>Nome</th><th>RG</th><th>Status</th><th>Total Prisões</th><th>Foi Preso?</th></tr>";
            resultado.forEach(r => {
                html += `<tr><td>${r.nome}</td><td>${r.rg}</td><td>${r.status}</td><td>${r.totalPrisao}</td><td>${r.foiPreso}</td></tr>`;
            });
            html += "</table>";
            document.getElementById("resultadoCriminal").innerHTML = html;
        }
    </script>
</body>
</html>
